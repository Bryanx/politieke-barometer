@using System.Web.Optimization
@model BAR.UI.MVC.Models.EditUserViewModel

@section CustomCSS{
    <link href="~/Scripts/datatables/datatables.net-responsive-bs/css/responsive.bootstrap.min.css" rel="stylesheet"></link>
    <link href="~/Scripts/datatables/datatables.net-bs/css/dataTables.bootstrap.min.css" rel="stylesheet"></link>
}

<h1>@Model.PageTitle</h1>
<hr />
@Html.Partial("Partials/_AdminTable", Model)
<div style="visibility: hidden">space</div>

@section CustomJS{
    <script src="~/Scripts/datatables/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="~/Scripts/datatables/datatables.net-bs/js/dataTables.bootstrap.min.js"></script>
    <script type="text/javascript">

        $('.accountActivityChange').click(function() {
            var $this = $(this);
            var id = $this.data('item-id');
            console.log($this.text());
            $.ajax({
                    type: 'POST',
                    url: '/api/Admin/ToggleAccountActivity/' + id
                }).fail(() => {/* ok */ })
                .done(function () {
                    $this.toggleClass("btn-danger btn-success")
                        .toggleText(@Resources.Recover, @Resources.Remove)
                        .parent().parent().toggleClass("greyed-out");
                });
        });

        function changeRole(id, htmlId) {
            $.ajax({
                    type: "POST",
                    url: "/api/Admin/ChangeRole/" + id,
                    contentType: 'application/json; charset=utf-8',
                    dataType: "json",
                    data: JSON.stringify($("#dd" + htmlId + " option:selected").text())
                }).fail(() => {/* ok */ })
                .done(function () {
                    $("#td2" + htmlId).text($("#dd" + htmlId + " option:selected").text());
                });
            event.preventDefault();
        }
    </script>
}